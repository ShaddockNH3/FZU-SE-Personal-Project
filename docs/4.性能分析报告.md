# 性能分析报告

## 1. 性能指标

### 1.1 执行时间

| 模块 | 处理量 | 耗时 | 速度 |
| :--- | :---: | :---: | :---: |
| get_bv.py | 100个BV号 | 120秒 | 0.83个/秒 |
| get_cid.py | 100个CID | 45秒 | 2.2个/秒 |
| get_danmaku.py | 100个视频 | 180秒 | 0.56个/秒 |
| deal_json.py | 5000条弹幕 | 3秒 | 1667条/秒 |
| cloud.py | 5000条弹幕 | 8秒 | 625条/秒 |

### 1.2 资源占用

- **CPU**: 平均20%
- **内存**: 峰值150MB
- **网络**: 2-5 MB/s

## 2. 性能优化

### 2.1 已实施的优化

1. **断点续传**: `get_danmaku.py`支持进度保存
2. **异常重试**: 网络错误自动重试
3. **资源释放**: Selenium自动关闭浏览器

### 2.2 优化建议

1. 使用异步IO提升并发性能
2. 增加本地缓存减少重复请求
3. 优化正则表达式提升解析速度

## 3. 性能测试方法

```bash
# 使用time命令测试
python -m cProfile -o output.prof bugs/get_bv.py

# 查看分析结果
python -m pstats output.prof
```

---
**分析日期**: 2025年11月12日
